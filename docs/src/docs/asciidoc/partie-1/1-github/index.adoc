= Github
:stylesheet: ../../style.css
:toc: left
:numbered:

image:vault.jpg[Vault, 100, float=right]

Un *Versioning Control System* (VCS) permet de stocker tout son fichiers : code, configuration, scripts...

C'est le coffre fort d'une équipe de développement.

Il doit être simple d'interagir avec et simple de restaurer un état passé.

De tous les système récents, *git* est le plus à la mode.

C'est un *distributed VCS* (DVCS) et suit donc une philosophie spéciale. Il multiplie les capacités de travail dans des branches (locales ou distantes) permettant de travailler simultanément sur plusiseurs sujets en parallèle. Il est particulièrement adapté à du travail sur des projets open source où les bureaux sont dématérialisés et les collaborateurs multiples.

En pratique, il est aussi assez simple à utiliser dans un cadre plus restreint.

== Compte github

image:github.png[40, 40] https://github.com/[Github] est un site web qui propose une interface web communautaire par dessus git. Github est gratuit pour les projets open source et simple à utiliser. Cela en fait un outils de référence pour les projets open source.

C'est l'outils que nous allons utiliser pour notre projet.

Créez un compte github et configurez une clée ssh en suivant le https://help.github.com/articles/generating-ssh-keys/[tutorial github]

== Repository 'test-project'

Depuis le dashboard, créez un repository test-project.

On doit donc obtenir un repository de la forme `git@github.com:{user}/test-project.git`

On peut choisir un autre nom pour le repository. Dans ce cas, il faut adapter les références à github pour toutes les manipulations à venir.

== Commandes en local

=== git init

Nous créons le répertoire du projet en local

[source.terminal]
----
projects$ mkdir test-project
projects$ cd test-project
test-project$
----

Afin de pouvoir pusher notre projet vers github, il faut d'abord initialiser notre répertoire projet.

[source.terminal]
----
test-project$ git init
Initialized empty Git repository in /path/to/projects/test-project/.git/
----

=== .gitignore

Certains fichiers ne doivent pas être envoyé vers le VCS : les fichiers générés lors de la compilation ou bien les fichiers générés par le système de build ne font pas partie des sources.

On crée le fichier *.gitignore* à la racine du projet afin de les exclure.

[source.terminal]
----
# gradle
.gradle
build

# intellij
.idea
.iml
----

Le répertoire *build* contient le résultat de la compilation et autres fichiers générés lors du build.

Le répertoire *.gradle* est un répertoire de travail associé à notre outils de build.

*.idea* et *.iml* sont la définition du module sous intellij.

Il faudra ajouter d'éventuels autres patterns si le besoin se présentait.

=== git add

La commande git status doit donc afficher à peu près cela.

[source.terminal]
----
test-project$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .gitignore
nothing added to commit but untracked files present (use "git add" to track)
----

On ajoute donc tout notre fichier et on commit.

[source.terminal]
----
test-project$ git add .gitignore
test-project$ git commit -m "initial commit"
----

=== git remote add

Il nous reste donc a relier notre master local au origin/master

[source.terminal]
----
test-project$ git remote add origin git@github.com:{user}/test-project.git
----

=== git push

Afin d'envoyer les fichiers vers github, on utilise la commande push.

[source.terminal]
----
test-project$ git push origin master
----

Les fichiers sont maintenant sur le repository github.

Afin de simplifier les push et les pull, on peut ajouter un lien par défaut entre le master local et le master sur origin.

[source.terminal]
----
test-project$ git config branch.master.merge refs/heads/master
----

Maintenant `git push` et `git pull` feront automatiqment le lien avec origin. La commande de push devient donc simplement :

[source.terminal]
----
test-project$ git push
----
