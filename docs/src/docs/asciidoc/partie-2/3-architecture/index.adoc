= Architecture de l'application
:stylesheet: ../../style.css

== vision globale

L'architecture est composée d'une application web qui est reliée à une base de données mongodb.

[ditaa, 'architecture', align="center"]
....
/-------\      +-------+
|       |      |{s}    |
|web app| ---> | mongo |
|       |      |       |
\-------/      +-------+
....

L'application est en java et est packagée sous le format standard war.

Mongodb est une base nosql qui stocke des documents en format BSON (Binary JSON).

== technology stack

****
[.float-group]
--
image::java.png[width="100",role="left"]

Java est un language de programmation orienté objet.

Java c'est la jvm qui permet de faire tourner les programmes et le jdk qui contient les libraries standard et le compilateur.

Java Enterprise Edition (JEE) est un ensemble de librairies et outils facilitant (?) le développement d'applications.
--
****

****
[.float-group]
--
image::gradle.png[width="100",role="left"]

https://gradle.org/[Gradle] est un outils de build pour beaucoup de languages (java, groovy, scala, c...)

Il est écrit en groovy et se configure à l'aide d'un language spécifique (DSL)

Il est plus récent et plus souple que son concurent principal : maven
--
****

****
[.float-group]
--
image::tomcat.png[width="100",role="left"]

http://tomcat.apache.org/[Tomcat] est un serveur web pouvant lancer des applications java.

Il est open source et offre de très bonnes performances.

C'est celui que l'on va utiliser pour le développement.
--
****

****
[.float-group]
--
image::spring.png[width="100",role="left"]

http://projects.spring.io/spring-framework/[Spring] est un framework par injection de dépendances (DI).

Spring a aussi un module MVC pour le web, que nous utilisons.
--
****

****
[.float-group]
--
image::mongo.jpg[width="100",role="left"]

https://www.mongodb.org/[MongoDB] est une base données orientée document (en opposition des tables en SQL).

Un document est un arbre json qui est stocké en Binary JSON (BSON). Ce sont des structures souples, sans schéma.

Mais elle n'offre pas les mêmes services que les bases SQL : transactions et intégrité référentielle.
--
****

****
[.float-group]
--
image::bootstrap.png[width="100",role="left"]

http://getbootstrap.com/[Bootstrap] est un framework html, css et javascript pour développer des pages responsives.

Développé par des membres de twitter, il est aujourd'hui très largement utilisé.
--
****

****
[.float-group]
--
image::jquery.png[width="100",role="left"]

http://jquery.com/[jquery] est un framework javascript très populaire.

Il est simple mais néanmoins très puissant.

Il est utilisé par boostrap.
--
****

****
[.float-group]
--
image::bower.png[width="100",role="left"]

http://bower.io/[Bower] est un outils de gestion de dépendances pour librairies front (css et js).

Dans notre projet, on s'en sert pour récupérer jquery et bootstrap.
--
****

== structure de projet standard

Notre projet suit le https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html[Standard Directory Layout] introduit par Maven

par défaut, Gradle suit ce standard :

[source]
----
src                 // toutes les sources
├─ main             // le code de l'application
|  ├─ [language 1]  // le code est segmenté par language
|  ├─ [language 2]
└─ test             // le code des test
   ├─ [language 1]
   ├─ [language 2]
----

Dans notre cas :

[source]
----
src
├─ main
|  ├─ java        // notre code en java
|  ├─ resources   // les fichiers qui vont aussi dans le classpath
|  └─ webapp      // les fichiers qui vont à la racine de l'application web
|     ├─ WEB-INF  // fichiers de configuration protégés
|     └─ META-INF // fichiers de méta données protégés
└─ test
   ├─ java
   └─ resources
----

== structure de l'app

L'application a une structure traditionnelle MVC pour le web.

[ditaa, 'mvc', align="center"]
....
                                                                                         +----------+
                                 +-------------------+         +------------------+      |{s}       |
                                 |                   |         |                  |      |          |
                          +----->+    Controllers    +-------->+     Services     +----->+          |
                          |      |                   |         |                  |      |   Base   |
+------------------+      |      +-------------------+         +------------------+      |          |
|                  |      |                                                              |          |
|     request      +------+                                                              +----------+
|    dispatcher    |      |
|                  |      |      +-------------------+
+------------------+      |      |                   |
                          +----->+     JSP views     |
                                 |                   |
                                 +-------------------+
....

Le rôle des composants :

* request dispatcher : il est fournit par le framework. Il 'dispatch' les requêtes entrantes vers les bons controllers / vues
* controllers : ils aiguillent la requête entre les services et la vue
* services : on y range la logique un peu plus avancée et les accès à la base.
* JSP views : ce sont les templates qui produisent le html

== vue séquentielle

dispatcher -> controller -> service -> db -> dispatcher -> jsp view

== tests et TDD
